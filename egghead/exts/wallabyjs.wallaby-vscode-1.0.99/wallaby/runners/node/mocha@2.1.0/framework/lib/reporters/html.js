/*
 * Wallaby.js - v1.0.613
 * http://wallabyjs.com
 * Copyright (c) 2014-2018 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
function HTML(e){Base.call(this,e);var t,n,i=this,r=this.stats,s=(e.total,fragment(statsTemplate)),o=s.getElementsByTagName("li"),a=o[1].getElementsByTagName("em")[0],l=o[1].getElementsByTagName("a")[0],c=o[2].getElementsByTagName("em")[0],u=o[2].getElementsByTagName("a")[0],d=o[3].getElementsByTagName("em")[0],h=s.getElementsByTagName("canvas")[0],p=fragment('<ul id="mocha-report"></ul>'),f=[p],_=document.getElementById("mocha");if(h.getContext){var y=window.devicePixelRatio||1;h.style.width=h.width,h.style.height=h.height,h.width*=y,h.height*=y,n=h.getContext("2d"),n.scale(y,y),t=new Progress}return _?(on(l,"click",function(){unhide();var e=/pass/.test(p.className)?"":" pass";p.className=p.className.replace(/fail|pass/g,"")+e,p.className.trim()&&hideSuitesWithout("test pass")}),on(u,"click",function(){unhide();var e=/fail/.test(p.className)?"":" fail";p.className=p.className.replace(/fail|pass/g,"")+e,p.className.trim()&&hideSuitesWithout("test fail")}),_.appendChild(s),_.appendChild(p),t&&t.size(40),e.on("suite",function(e){if(!e.root){var t=i.suiteURL(e),n=fragment('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,escape(e.title));f[0].appendChild(n),f.unshift(document.createElement("ul")),n.appendChild(f[0])}}),e.on("suite end",function(e){e.root||f.shift()}),e.on("fail",function(t,n){"hook"==t.type&&e.emit("test end",t)}),void e.on("test end",function(e){var s=r.tests/this.total*100|0;t&&t.update(s).draw(n);var o=new Date-r.start;if(text(a,r.passes),text(c,r.failures),text(d,(o/1e3).toFixed(2)),"passed"==e.state)var l=i.testURL(e),u=fragment('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">‣</a></h2></li>',e.speed,e.title,e.duration,l);else if(e.pending)var u=fragment('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var u=fragment('<li class="test fail"><h2>%e <a href="%e" class="replay">‣</a></h2></li>',e.title,i.testURL(e)),h=e.err.stack||e.err.toString();~h.indexOf(e.err.message)||(h=e.err.message+"\n"+h),"[object Error]"==h&&(h=e.err.message),!e.err.stack&&e.err.sourceURL&&void 0!==e.err.line&&(h+="\n("+e.err.sourceURL+":"+e.err.line+")"),u.appendChild(fragment('<pre class="error">%e</pre>',h))}if(!e.pending){var p=u.getElementsByTagName("h2")[0];on(p,"click",function(){_.style.display="none"==_.style.display?"block":"none"});var _=fragment("<pre><code>%e</code></pre>",utils.clean(e.fn.toString()));u.appendChild(_),_.style.display="none"}f[0]&&f[0].appendChild(u)})):error("#mocha div missing, add it to your document")}function error(e){document.body.appendChild(fragment('<div id="mocha-error">%s</div>',e))}function fragment(e){var t=arguments,n=document.createElement("div"),i=1;return n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[i++]);case"e":return escape(t[i++])}}),n.firstChild}function hideSuitesWithout(e){for(var t=document.getElementsByClassName("suite"),n=0;n<t.length;n++){var i=t[n].getElementsByClassName(e);0==i.length&&(t[n].className+=" hidden")}}function unhide(){for(var e=document.getElementsByClassName("suite hidden"),t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function text(e,t){e.textContent?e.textContent=t:e.innerText=t}function on(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}var Base=require("./base"),utils=require("../utils"),Progress=require("../browser/progress"),escape=utils.escape,Date=global.Date,setTimeout=global.setTimeout,setInterval=global.setInterval,clearTimeout=global.clearTimeout,clearInterval=global.clearInterval;exports=module.exports=HTML;var statsTemplate='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>',makeUrl=function(e){var t=window.location.search;return window.location.pathname+(t?t+"&":"?")+"grep="+encodeURIComponent(e)};HTML.prototype.suiteURL=function(e){return makeUrl(e.fullTitle())},HTML.prototype.testURL=function(e){return makeUrl(e.fullTitle())};